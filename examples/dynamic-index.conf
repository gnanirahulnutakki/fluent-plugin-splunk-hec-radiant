# Dynamic Index Configuration (Issue #278)
# Shows how to use ${tag} and other placeholders for dynamic index selection

# Example 1: Use tag as index name
<match logs.**>
  @type splunk_hec_radiant
  hec_host splunk.example.com
  hec_token YOUR_TOKEN_HERE

  # Dynamic index based on full tag
  # Tag "logs.production" -> index "logs.production"
  index ${tag}

  <buffer tag>
    @type memory
  </buffer>
</match>

# Example 2: Use tag parts for index
<match network.*.logs>
  @type splunk_hec_radiant
  hec_host splunk.example.com
  hec_token YOUR_TOKEN_HERE

  # Use first part of tag
  # Tag "network.production.logs" -> index "network_index"
  index ${tag_parts[0]}_index

  <buffer tag>
    @type memory
  </buffer>
</match>

# Example 3: Combine tag with static prefix
<match app.**>
  @type splunk_hec_radiant
  hec_host splunk.example.com
  hec_token YOUR_TOKEN_HERE

  # Static prefix + dynamic tag
  # Tag "app.api" -> index "prod_app_api"
  index prod_${tag}

  <buffer tag>
    @type memory
  </buffer>
</match>

# Example 4: Use record field for index
<match **>
  @type splunk_hec_radiant
  hec_host splunk.example.com
  hec_token YOUR_TOKEN_HERE

  # Extract index from record field
  index_key index_name

  # This will use record["index_name"] as the index
  # Requires the field to exist in your log records
</match>

# Example 5: Kubernetes example with namespace-based indexing
<match kubernetes.**>
  @type splunk_hec_radiant
  hec_host splunk.example.com
  hec_token YOUR_TOKEN_HERE

  # Use Kubernetes namespace as index
  index k8s_${$.kubernetes.namespace_name}

  <buffer $.kubernetes.namespace_name>
    @type memory
  </buffer>
</match>
